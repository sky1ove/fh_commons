# Basic


<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Setup

``` python
hdrs = bootstrap_hdrs()+download_js()+datatable_hdrs()
```

``` python
show(*hdrs)
```

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
<script>
            document.addEventListener('htmx:load', function() {
                var tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]');
                var tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl));
            });
        </script><script src="./imports/download_csv_svg.js"></script><script src="https://code.jquery.com/jquery-3.7.1.js"></script><script src="https://cdn.datatables.net/2.1.5/js/dataTables.js"></script><script src="https://cdn.datatables.net/2.1.5/js/dataTables.bootstrap5.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/2.1.5/css/dataTables.bootstrap5.css">
<script>if (window.htmx) htmx.process(document.body)</script>

``` python
from ngrok_token import *
url = start_ngrok(token)
```

    ngrok tunnel opened at: https://a223-3-238-95-91.ngrok-free.app

``` python
app,rt = fast_app(pico=False,hdrs=hdrs)
server = JupyUvi(app)
```

<script>
document.body.addEventListener('htmx:configRequest', (event) => {
    if(event.detail.path.includes('://')) return;
    htmx.config.selfRequestsOnly=false;
    event.detail.path = `${location.protocol}//${location.hostname}:8000${event.detail.path}`;
});
</script>

## Request

### req.url

Get current page’s url

``` python
@rt
def sdf(req):
    return P(req.url)
```

``` python
htmx(url,'/sdf')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/sdf" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### req.url_for

Get original

``` python
@rt
def sdf(req):
    return P(req.url_for('sdf'))
```

``` python
htmx(url,'/sdf')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/sdf" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

With param:

``` python
# @rt("/api/{data}")
# def this(req,data:str):
#     return req.url_for('this',data=data)
```

``` python
# htmx(url,'/api/ssss')
```

<iframe src="https://2425-3-81-185-19.ngrok-free.app/api/ssss" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Toasts

toasts options: “info”, “success”, “warning”, “error”

``` python
setup_toasts(app)
```

``` python
@rt
def test():
    return A('click to trigger toasts',hx_get=tt,target_id='content'),Div(id='content')

@rt
def tt(sess):
    return add_toast(sess, "Please upload a csv or excel file", "error")
```

``` python
htmx(url,'/test')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Download file through a link

``` python
@app.get
def download_example():
    return FileResponse('data/example.csv')

@rt
def test(req):
    return A('Download Example File', 
             href=req.url_for('download_example'), # for dynamic route
             download='example.csv', # download file name
            )
```

``` python
htmx(url,'/test')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Tooltip

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L19"
target="_blank" style="float:right; font-size:smaller">source</a>

### Tooltip

>      Tooltip (tooltip_content, trigger_content, element='span', **kwargs)

*Create a Bootstrap tooltip*

<table>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tooltip_content</td>
<td></td>
<td></td>
<td>FT or str</td>
</tr>
<tr class="even">
<td>trigger_content</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>element</td>
<td>str</td>
<td>span</td>
<td></td>
</tr>
<tr class="even">
<td>kwargs</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

``` python
@rt
def test():
    return blank(),Tooltip(P('instruction'),'❔')
```

``` python
htmx(url,'/test')
```

<iframe src="https://4903-3-238-95-91.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L38"
target="_blank" style="float:right; font-size:smaller">source</a>

### Helptip

>      Helptip (tooltip_text=' ', trigger_content=i((),{'class': 'bi bi-
>               question-circle-fill'}), **kwargs)

*Create a Bootstrap tooltip with help icon as default*

<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 25%" />
<col style="width: 34%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>tooltip_text</td>
<td>str</td>
<td></td>
<td>FT or str</td>
</tr>
<tr class="even">
<td>trigger_content</td>
<td>FT</td>
<td>i((),{‘class’: ‘bi bi-question-circle-fill’})</td>
<td></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

``` python
@rt
def test():
    return blank(),P('Z Score',Helptip((P('sdfsdf'))))
```

``` python
htmx(url,'/test')
```

<iframe src="https://4903-3-238-95-91.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Table / Dataframe

``` python
df = pd.read_csv('data/example.csv')
```

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L46"
target="_blank" style="float:right; font-size:smaller">source</a>

### df2html

>      df2html (df, tooltips=None, cls='table table-striped', id=None, **kwargs)

*Create an HTML table with Bootstrap styling and tooltips*

<table>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>df</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>tooltips</td>
<td>NoneType</td>
<td>None</td>
<td>dict</td>
</tr>
<tr class="odd">
<td>cls</td>
<td>str</td>
<td>table table-striped</td>
<td></td>
</tr>
<tr class="even">
<td>id</td>
<td>NoneType</td>
<td>None</td>
<td></td>
</tr>
<tr class="odd">
<td>kwargs</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L78"
target="_blank" style="float:right; font-size:smaller">source</a>

### download_table

>      download_table (*args, **kwargs)

*Enable table download through a download button*

`download_table()`needs to be wrapped in the same Div with the
[`df2html`](https://sky1ove.github.io/fh_commons/basic.html#df2html)

``` python
@rt
def test():
    # to show table correctly, always needs a container
    return Container(
        Div(download_table(), df2html(df,tooltips={'ID': P('ssss')}))
    )
```

``` python
htmx(url,'/test')
```

<iframe src="https://4903-3-238-95-91.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### Download invisible dataframe

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L83"
target="_blank" style="float:right; font-size:smaller">source</a>

### send_df

>      send_df (df, fname, href, button=button((i((),{'class': 'bi bi-
>               download'}), ' Data'),{'class': 'btn btn-outline-secondary btn-
>               sm'}))

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L94"
target="_blank" style="float:right; font-size:smaller">source</a>

### download_df

>      download_df (dataframe, fname)

``` python
@app.post
def download_file(dataframe:str, fname:str):
    return download_df(dataframe,fname)

@rt
def test(req):
    download_button = send_df(df,
                            fname='sdf.csv',
                            href=req.url_for('download_file') # function name
                           )
    return download_button
```

``` python
htmx(url, '/test')
```

<iframe src="https://4903-3-238-95-91.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### Dynamic table

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L105"
target="_blank" style="float:right; font-size:smaller">source</a>

### dynamic_table

>      dynamic_table (df, id='dynamic_table', cls='table table-striped')

*Dynamic data tables; make new id names if multiple tables*

``` python
import numpy as np
```

``` python
matrix = np.random.rand(20, 10)
df = pd.DataFrame(matrix).round(2)
```

``` python
@rt
def test():
    return Container(dynamic_table(df))
```

``` python
htmx(url,'/test')
```

<iframe src="https://4903-3-238-95-91.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Pagination

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L111"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_pagination

>      get_pagination (page, total_pages, routes)

*Bootstrap-styled pagination with integrated page jump form*

Suppose I want a pagination bar for page 3 of 20

``` python
get_pagination(3,20,'#')
```

<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center align-items-center">
    <li class="page-item">
<a href="#?page=2" class="page-link">Previous</a>    </li>
    <li class="page-item active">
<span class="page-link">Page 3 of 20</span>    </li>
    <li class="page-item">
<a href="#?page=4" class="page-link">Next</a>    </li>
    <li class="page-item">
<form enctype="multipart/form-data" method="get" action="#" class="d-flex align-items-center m-2 g-2">        <input type="number" name="page" placeholder="Page" min="1" max="20" class="form-control" style="width: 100px; display: inline-block;">
<button type="submit" class="btn btn-primary">Go</button></form>    </li>
  </ul>
</nav>
<script>if (window.htmx) htmx.process(document.body)</script>

The above pagination can be combined with this function:

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L139"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_page_index

>      get_page_index (current_page, total_items, items_per_page=12)

*Get start index and end index given the current page number*

Suppose I have a list of 100 items, and I want each page have 12 items,
so I need to calculate start index and end index given the current page
(e.g., 2)

``` python
get_page_index(2,100,12)
```

    (12, 24, 9)

Example for a pagination:

``` python
protein_list = [str(i) for i in range(100)]
```

``` python
@rt
def test(req, page: int = 1):

    # get item index
    start_idx, end_idx,total_pages = get_page_index(page, len(protein_list))

    # get items
    current_proteins = protein_list[start_idx:end_idx]
    show_proteins = P(','.join(current_proteins))

    # get dynamic route
    this_routes =req.url_for('test')

    # get pagination item
    pagination = get_pagination(page,total_pages,routes=this_routes)

    return show_proteins, pagination,this_routes
```

``` python
htmx(url,'/test')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/test" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

## Modal

### Modal content

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L218"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_content

>      modal_content (title, *args)

``` python
modal_content('Modal content','sdfsdf')
```

<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header">
      <h1 class="modal-title fs-5">Modal content</h1>
<button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"></button>    </div>
    <div class="modal-body">sdfsdf</div>
  </div>
</div>
<script>if (window.htmx) htmx.process(document.body)</script>

It can be combined with the below to search and trigger modal

### Use form button to trigger modal

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L233"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_form

>      modal_form (*form_content, post, btn_text='Search', cls=None,
>                  target_id='modals-window')

*Reference: https://htmx.org/examples/modal-bootstrap/*

``` python
@rt
def page():
    modal_send = modal_form(Input(type='text',id='input_text'),post=modal)
    return modal_send

@rt
def modal(input_text:str):
    return modal_content('Modal title',input_text)
```

``` python
htmx(url,'/page')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/page" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### Use anchor link to trigger modal

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L260"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_link

>      modal_link (text, post, cls=None, target_id='modals-window')

*Reference: https://htmx.org/examples/modal-bootstrap/*

``` python
@rt
def page():
    modal_send = modal_link('click here',post=modal)
    return modal_send

@rt
def modal():
    return modal_content('Modal title','sdf')
```

``` python
htmx(url,'/page')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/page" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### Modal content

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L218"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_content

>      modal_content (title, *args)

``` python
modal_content('Modal content','sdfsdf')
```

<div class="modal-dialog modal-xl">
  <div class="modal-content">
    <div class="modal-header">
      <h1 class="modal-title fs-5">Modal content</h1>
<button type="button" data-bs-dismiss="modal" aria-label="Close" class="btn-close"></button>    </div>
    <div class="modal-body">sdfsdf</div>
  </div>
</div>
<script>if (window.htmx) htmx.process(document.body)</script>

It can be combined with the below to search and trigger modal

### Use form button to trigger modal

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L233"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_form

>      modal_form (*form_content, post, btn_text='Search', cls=None,
>                  target_id='modals-window')

*Reference: https://htmx.org/examples/modal-bootstrap/*

``` python
@rt
def page():
    modal_send = modal_form(Input(type='text',id='input_text'),post=modal)
    return modal_send

@rt
def modal(input_text:str):
    return modal_content('Modal title',input_text)
```

``` python
htmx(url,'/page')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/page" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

### Use anchor link to trigger modal

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/basic.py#L260"
target="_blank" style="float:right; font-size:smaller">source</a>

### modal_link

>      modal_link (text, post, cls=None, target_id='modals-window')

*Reference: https://htmx.org/examples/modal-bootstrap/*

``` python
@rt
def page():
    modal_send = modal_link('click here',post=modal)
    return modal_send

@rt
def modal():
    return modal_content('Modal title','sdf')
```

``` python
htmx(url,'/page')
```

<iframe src="https://4687-3-81-185-19.ngrok-free.app/page" style="width: 100%; height: auto; border: none;" onload="{
        let frame = this;
        window.addEventListener('message', function(e) {
            if (e.data.height) frame.style.height = (e.data.height+1) + 'px';
        }, false);
    }" allow="accelerometer; autoplay; camera; clipboard-read; clipboard-write; display-capture; encrypted-media; fullscreen; gamepad; geolocation; gyroscope; hid; identity-credentials-get; idle-detection; magnetometer; microphone; midi; payment; picture-in-picture; publickey-credentials-get; screen-wake-lock; serial; usb; web-share; xr-spatial-tracking"></iframe> 

------------------------------------------------------------------------

<a
href="https://github.com/sky1ove/fh_commons/blob/main/fh_commons/form.py#L100"
target="_blank" style="float:right; font-size:smaller">source</a>

### get_spinner

>      get_spinner (id, cls='d-flex justify-content-center')

``` python
get_spinner(id='sdf')
```

<div class="d-flex justify-content-center">
  <div role="status" id="sdf" class="htmx-indicator spinner-border">
<span class="visually-hidden">Loading...</span>  </div>
</div>
<script>if (window.htmx) htmx.process(document.body)</script>

Example:

``` python
# @app.post
# def example():
#     ...
#     send_select = Form(
#             Hidden(value=df.to_json(),id='upload_df'),
#             Div(select_list,button,cls='row g-2 align-items-center'),
#             post=calculate,
#             target_id='result',
#             hx_indicator='#spinner',
#         )
    
#     spinner=get_spinner(id='spinner')
    
#     return send_select, spinner, ...
```

## End

``` python
server.stop()
kill_ngrok()
```

    ngrok tunnel killed
